# 玄学测前生网站需求分析

## 1. 背景与目标
- 在现有测评网站基础上扩展一套“前生身份测算”体验，保留既有 UI 风格与技术栈。
- 通过 MBTI、生辰八字与趣味问卷推测用户前世身份，生成故事与人生点评，增强用户互动与分享。
- 登录流程需根据密码区分入口：旧密码进入原测评网站，新密码进入前生测算体验。

## 2. 用户定位与场景
- **核心用户**：偏好性格测试、玄学测算、社交分享的年轻受众。
- **主要场景**：通过社交渠道获取测试链接 → 登录 → 填写表单 → 获得前世报告 → 分享或继续体验。
- **关键需求**：趣味性强、流程顺滑、结果个性化、视觉与现有品牌一致。

## 3. 关键用户旅程
1. **访问与登录**  
   - 输入账号密码。系统识别密码类型：旧密码跳转至原测评页，新密码跳转至前生测算页。  
   - 支持错误提示、注册/找回指引。
2. **信息收集**  
   - Step 1：填写 MBTI（可选择或输入）。  
   - Step 2：输入生辰八字（出生日期、时辰、性别等，提供农历/阳历转换指引）。  
   - Step 3：回答 8 道人类学趣味题（单选/多选/滑块等形式，分组展示）。  
   - 全程显示进度、可保存草稿。
3. **测算与等待**  
   - 展示轻量动效或提示语（“正在摇签...”），减轻等待感。  
   - 后端执行匹配算法，返回前世人设与点评内容。
4. **结果展示**  
   - 人物身份名称、时代、地域、角色描述。  
   - 故事段落 + 优缺点 + 桃花运 + 财运 + 人生建议。  
   - 视觉元素（插画、符号、地图），配合分享按钮、再测一次、推荐其他测验。
5. **分享与留存**  
   - 输出分享链接、海报、截图指引。  
   - 引导用户关注公众号/邮件订阅或邀请好友体验。

## 4. 功能需求
- **登录模块**
  - 密码匹配逻辑：维护老密码表与新密码表，或在后端配置跳转映射。
  - 支持基础的账号管理、异常提示、登录状态保持。
- **测算表单**
  - 数据验证（MBTI 格式、日期有效性、必填项校验）。
  - 多步表单组件，支持返回修改、自动滚动、移动端适配。
  - 问题与选项配置化（JSON/管理后台）。
- **前世匹配算法**
  - 输入：MBTI、生辰八字解析结果、趣味题标签。
  - 处理：计算 MBTI 匹配度、五行偏好、行为标签得分，通过加权规则选出最佳人设。
  - 输出：人设 ID、故事文本、点评内容、额外推荐。
- **结果页**
  - 动态渲染角色信息、文案、图像。
  - 提供“生成专属分享图”“复制链接”“再测一次”等操作。
  - 记录结果用于后续分析（需合规储存）。
- **运营与管理**
  - 人设库维护（详见附录），支持增删改、版本控制。
  - 问题库及算法权重可调。
  - 数据统计：访问量、完成率、分享率、热门人设等。

## 5. 内容与人设库要求
- 详见附录《人设库设计要点》。
- 首批上线需覆盖至少 40–60 个高质量人设，保证地域/时代/职业多样性。
- 文案需保持品牌口吻，避免文化不当描述。

## 6. UI/UX 指南
- 延续现有配色、排版、动效风格，确保体验一致。
- 登录页新增“前生测算入口”暗示，保持简洁。
- 表单阶段化呈现，加入引导文案、轻量插画提升沉浸感。
- 结果页突出核心身份，使用卡片式或卷轴式布局，支持移动端分享。
- 设计交付：提供高保真稿、组件标注、插画资源（与 `visualCue` 对齐）。

## 7. 技术架构与实现建议
- **前端**：沿用现有框架（如 React/Vue），新增路由 `/rebirth`。引入状态管理存储表单进度，使用可配置组件渲染问卷。
- **后端**：扩展现有 API，新增登录分发逻辑、测算接口、统计接口。可采用 Node.js/Java 等既有栈。  
  - 八字解析可使用现有库或自研工具。  
  - 匹配算法封装为独立服务，便于调参。
- **数据存储**：  
  - 网站配置与问卷保存在数据库或 JSON 文件。  
  - 人设库数据见附录，建议 JSON + Schema 校验。  
  - 日志与统计数据入库（考虑脱敏/匿名）。
- **部署与发布**：  
  - 保持与原站一致的 CI/CD 流程，增加自动化测试（表单验证、接口联调、算法单元测试）。
  - 灰度发布或 A/B 测试新入口。

## 8. 非功能需求
- 性能：表单与结果页首屏加载 < 2s（Wi-Fi），接口响应 < 500ms。
- 兼容性：主流浏览器（Chrome、Safari、Edge、Firefox）及移动端适配。
- 安全：登录相关接口防暴力破解；个人信息（出生日期等）加密传输、合规保存；设置数据脱敏策略。
- 稳定性：关键服务提供监控与报警，异常时给出友好降级方案。

## 9. 数据与运营监控
- 埋点：登录来源、表单完成率、各题目放弃率、匹配人设分布、分享行为。
- 看板：日活、转化率、平均完成时间、热门分享渠道。
- 调参与优化：基于数据调整问题、权重、稀有度，持续提升结果多样性与趣味性。

## 10. 项目执行计划（建议）
1. 需求确认与原型设计（含用户流程、UI 线框）。
2. 技术方案评审，拆分前后端任务，制定人设库/内容生产排期。
3. 并行推进：  
   - 前端搭建路由与表单框架。  
   - 后端实现登录分发、测算 API、统计接口。  
   - 文案团队产出人设库草稿，脚本导入。  
4. 联调与测试：功能测试、跨端测试、算法验证、性能与安全测试。
5. 预发布 + 数据监控，收集反馈迭代。

## 附录：人设库设计要点（摘要）
- 数据字段：`id`、`title`、`era`、`region`、`culture`、`role`、`mbtiAffinity`、`fiveElementProfile`、`traits`、`storyTemplate`、`evaluation`（`strengths`/`weaknesses`/`romance`/`wealth`/`advice`）、`visualCue`、`rarity`、`hooks`、`meta` 等。
- 分类覆盖：按区域、时代、角色类型构建矩阵，保证多样性；目标初期至少 8 大区域 × 4 时代 × 4 职业类型。
- 匹配逻辑：结合 MBTI、五行、趣味题标签，多指标加权，`rarity` 控制结果多样；占位符模板统一命名。
- 资产管理：数据存储在 `data/personas` 目录，配 Schema 校验与导入脚本；视觉资源与 `visualCue` 对应；通过 Git 维护版本。
- 工作流程：规划矩阵 → 编写草稿 → 脚本校验 → 评审入库 → 版本迭代；持续收集用户反馈优化人设内容。
