# 玄学测前生网站 MVP 规划

## 1. 产品目标
- 在最短周期内推出“前生身份测算”基础功能，验证用户对玄学题材评测的兴趣与留存潜力。
- 保持与现有测评站点风格一致，同时引入差异化内容（MBTI + 八字 + 趣味题 + 人设故事）。
- 在 MVP 阶段聚焦核心流程跑通与结果呈现，后续可基于反馈扩展人设与玩法。

## 2. MVP 范围
- **登录分流**：共用现有账号体系；密码判断入口（旧密码 → 原测评，新密码 → 前生测算）。
- **测算流程**：
  - Step 1：采集 MBTI（下拉选择 + “我不知道”提示）。
  - Step 2：生辰信息（日期、时间、出生地/经纬度可选；提供“无出生时间”处理规则）。
  - Step 3：8 道趣味选择题（题库固定，分两页展示）。
- **算法输出**：
  - 简化匹配：根据 MBTI 维度标签 + 八字五行初步分析（取年柱简化）+ 趣味题标签 → 规则匹配至人设库。
  - 返回内容：人设标题、时代&地区、故事段落、优缺点、桃花运、财运、建议、视觉提示。
- **结果展示**：
  - 单页面展示全部解读；提供“再测一次”“复制链接”“生成分享图（静态模板）”按钮（允许分享图后续补全）。
  - 简单动画或 loading 提示（可用现成骨架屏）。
- **数据埋点**：登录来源、表单完成率、题目弃答、匹配人设 ID、分享点击。
- **人设库**：首批 50 条（JSON 文件 + Schema 校验脚本），支持随机稀有度与标签映射。
- **系统限制**：
  - 不做后台 CMS；人设调整通过 Git 配置。
  - 分享图初期可只提供按钮与默认模板链接；生成逻辑可在后续迭代。

## 3. 用户旅程（MVP）
1. **访问登录**：输入账号密码 → 分流到对应入口。
2. **信息填写**：多步骤表单，展示进度条，可返回修改。
3. **匹配运算**：前端等待提示（3~5 秒），后端调取匹配服务返回结果。
4. **结果浏览**：加载人设信息、故事、点评、分享引导。
5. **留存引导**：按钮引导去测原站其他测评 / 分享链接。

## 4. 技术实现指引
- **前端**：
  - 沿用现有框架（React/Vue）；新增 `/rebirth` 路由，集成多步表单组件。
  - 表单状态本地缓存（localStorage 或 store）防止意外刷新。
  - 结果页支持响应式布局；图文格式延续现有设计系统。
- **后端**：
  - 登录 API 增加密码映射逻辑；可维护白名单/哈希表。
  - 新增 `/api/rebirth/calc`：接收表单数据 → 调用规则引擎 → 返回匹配 ID + 文案模块。
  - 规则引擎（MVP）使用静态规则集：MBTI → 性格标签，八字 → 五行倾向（年柱表），趣味题 → 行为标签 → 加权匹配。
  - 数据落库：保存测算记录（用户 ID、输入摘要、结果 ID、时间戳），用于分析。
- **数据与配置**：
  - `data/personas/*.json` 保存人设；`schema/persona.schema.json` 校验结构。
  - 趣味题配置存于 JSON，方便后续 A/B 调整。
- **部署**：
  - 延用现有 CI/CD；引入新单元测试（规则匹配函数、表单验证）。
  - 预发布环境运行灰度体验，确保旧站功能无回归。

## 5. 验收标准
- 登录密码分流可无缝跳转；无错误提示。
- 多步表单在桌面/移动端展示正常，必填校验完善（含无时辰情况）。
- 匹配 API 能在 500ms 内返回（不含网络）并返回有效人设。
- 结果页展示内容齐全（标题+故事+五项点评+视觉提示）；分享按钮可复制链接。
- 埋点数据可在日志或 BI 平台呈现基础指标。
- 人设库 50 条通过 Schema 校验；稀有度渲染正常。

## 6. MVP 暂缓项（后续迭代）
- 后台 CMS / 可视化人设编辑器。
- 动态生成海报/分享图（如 HTML-to-canvas）。
- 更精细的八字算法（加入月日时或外部 API）。
- 多语言支持、语音播报。
- 结果社交互动（留言、好友对比等）。

## 7. 时间建议（可依据团队调整）
- 需求确认 & 交互稿：1 周。
- 前后端开发 + 人设库整理：2 周。
- 联调与测试：1 周。
- 灰度上线 & 数据观察：1 周。

> 提示：MVP 完成后，建议立即收集用户反馈（问卷/埋点），优先迭代人设内容质量与算法准确性。  
